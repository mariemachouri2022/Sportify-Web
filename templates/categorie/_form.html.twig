{{ form_start(form, {'attr': {'novalidate': 'novalidate', 'id': 'categorie-form'}} ) }}
    {{ form_row(form.nom) }}
    {{ form_row(form.description) }}

    <!-- Hidden input field to hold the selected image path -->
    <div>
        <input type="text" id="selected-image-path" readonly="readonly">
    </div>

    <!-- File input field for selecting the image -->
    <div style="position: absolute; left: -9999px;">
        {{ form_widget(form.image, {'id': 'form_image'}) }}
    </div>

    <button type="submit" class="btn">{{ button_label|default('Save') }}</button>
{{ form_end(form) }}

<!-- JavaScript to handle image selection -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('form_image').addEventListener('change', function(event) {
            const selectedFile = event.target.files[0];
            document.getElementById('selected-image-path').value = selectedFile ? selectedFile.name : ''; // Update the value of the image path field
        });

        // Handle form submission
        document.getElementById('categorie-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission

            // Serialize form data
            const formData = new FormData(this);

            // Submit form data using AJAX
            fetch('{{ path('app_categorie_new') }}', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    // Handle successful form submission
                    // You can update the UI or display a success message here
                    // For example, redirect to the index page:
                    window.location.href = '{{ path('app_categorie_index') }}';
                } else {
                    // Handle form submission errors
                    // You can display an error message or handle the error accordingly
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    });
</script>
